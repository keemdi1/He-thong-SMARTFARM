<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <title>Há»‡ thá»‘ng Smartfarm IoT</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header>
    <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
      <img src="img/logo.png" alt="Logo" class="logo">
      <div>
        <h1 style="font-size: 26px; margin: 0;">ğŸŒ¿ Há»‡ Thá»‘ng GiÃ¡m SÃ¡t NÃ´ng Tráº¡i IoT</h1>
        <p style="margin: 0; margin: 10px auto 0 auto;">Quáº£n lÃ½ - Äiá»u khiá»ƒn - Quan sÃ¡t tá»« xa</p>
      </div>
    </div>
  </header>

  <nav>
    <button class="tab-btn active" data-tab="status">Tráº¡ng thÃ¡i thiáº¿t bá»‹</button>
    <button class="tab-btn" data-tab="control">Äiá»u khiá»ƒn thiáº¿t bá»‹</button>
    <button class="tab-btn" data-tab="nursery">CÃ¢y giá»‘ng</button>
    <button class="tab-btn" data-tab="other">Chá»©c nÄƒng khÃ¡c</button>
  </nav>

  <!-- TAB 1: Tráº¡ng thÃ¡i thiáº¿t bá»‹ -->
  <div id="status" class="tab-content active">
    <div class="card">
      <h2>Thiáº¿t bá»‹ Ä‘ang hoáº¡t Ä‘á»™ng</h2>
      <div class="status-box">
        <div><img src="img/pumpbg.png" alt="BÆ¡m"> BÆ¡m: <span id="status-pump">--</span></div>
        <div><img src="img/mistbg.png" alt="Phun sÆ°Æ¡ng"> Phun sÆ°Æ¡ng: <span id="status-mist">--</span></div>
        <div><img src="img/valvebg.png" alt="Van xáº£"> Van xáº£: <span id="status-valve">--</span></div>
        <div><img src="img/denbg.png" alt="ÄÃ¨n"> ÄÃ¨n: <span id="status-light">--</span></div>
        <div><img src="img/fanbg.png" alt="Quáº¡t"> Quáº¡t: <span id="status-fan">--</span></div>
        <div><img src="img/valvebg2.png" alt="Van bÆ¡m"> Van BÆ¡m: <span id="status-valve2">--</span></div>
      </div>
      
      <p style="margin-top:30px; text-align: center; font-size: 19px;">
        ğŸŒ¡ï¸ Nhiá»‡t Ä‘á»™: <strong id="nhietdo-value">-- Â°C</strong>
        &nbsp;&nbsp;&nbsp;&nbsp; ğŸ’¦ Äá»™ áº©m khÃ´ng khÃ­: <strong id="doam-value">-- %</strong>
        &nbsp;&nbsp;&nbsp;&nbsp; ğŸ”… Ãnh sÃ¡ng: <strong id="anhsang-value">-- %</strong>
        &nbsp;&nbsp;&nbsp;&nbsp; ğŸ’¦ Äá»™ áº©m Ä‘áº¥t: <strong id="doamdat-value">-- %</strong>
      </p>
    </div>
    <!-- Popup cáº£nh bÃ¡o AUTO -->
    <div id="autoPopup" class="auto-popup hidden">
      <div class="popup-content">
        <p>âš ï¸ LÆ°u Ã½: Cháº¿ Ä‘á»™ AUTO Ä‘ang hoáº¡t Ä‘á»™ng</p>
      </div>
    </div>
  </div>

  <!-- TAB 2: Äiá»u khiá»ƒn thiáº¿t bá»‹ -->
  <div id="control" class="tab-content">
    <div class="card">
      <h2>Äiá»u khiá»ƒn thiáº¿t bá»‹</h2>
      
      <div class="control-box">
        <div class="device-control">

          <!-- <button onclick="toggleDevice(this)">ğŸ’§ BÆ¡m: Táº®T</button> -->
          <img id="pum" src="img/pump.png" alt="BÆ¡m"/>
          <h3>BÆ¡m</h3>
          <div class="btn-group">
            <button id="btn1">Báº­t</button>
            <button id="btn2">Táº¯t</button>
          </div>
        </div>
        <!-- <button onclick="toggleDevice(this)">â˜ï¸ Phun sÆ°Æ¡ng: Táº®T</button> -->
          <div class="device-control">
            <img id="mist" src="img/mist.png" alt="Phun sÆ°Æ¡ng"/>
            <h3>Phun sÆ°Æ¡ng</h3>
            <div class="btn-group">
              <button id="btn3">Báº­t</button>
              <button id="btn4">Táº¯t</button>
            </div>
          </div>
          <!-- <button onclick="toggleDevice(this)">ğŸ’¨ Van xáº£: Táº®T</button> -->
          <div class="device-control">
            <img id="valve" src="img/valve.png" alt="Van xáº£"/>
            <h3>Van xáº£</h3>
            <div class="btn-group">
              <button id="btn5">Báº­t</button>
              <button id="btn6">Táº¯t</button>
            </div>
          </div>
          <!-- <button onclick="toggleDevice(this)">ğŸ’¡ ÄÃ¨n: Táº®T</button> -->
          <div class="device-control">
            <img id="light" src="img/den.png" alt="ÄÃ¨n"/>
            <h3>ÄÃ¨n</h3>
            <div class="btn-group">
              <button id="btn7">Báº­t</button>
              <button id="btn8">Táº¯t</button>
            </div>
          </div>
        <!-- <button onclick="toggleDevice(this)">ğŸ’¨ Quáº¡t: Táº®T</button> -->
        <div class="device-control">
          <img id="fan" src="img/fan.png" alt="Quáº¡t"/>
          <h3>Quáº¡t</h3>
          <div class="btn-group">
            <button id="btn9">Báº­t</button>
            <button id="btn10">Táº¯t</button>
          </div>
        </div>

        <!-- <button onclick="toggleDevice(this)">ğŸ’¨ valve2: Táº®T</button> -->
        <div class="device-control">
          <img id="valve2" src="img/valve2.png" alt="Van bÆ¡m"/>
          <h3>Van tÆ°á»›i</h3>
          <div class="btn-group">
            <button id="btn11">Báº­t</button>
            <button id="btn12">Táº¯t</button>
          </div>
        </div>
      </div>
      
      <div class="control-box">
        <!-- NÃºt AUTO -->
        <div class="card" style="margin-top: 30px;">
          <div class="auto-row">
            <h2 style="display:inline">AUTO:</h2>
            <button id="autoBtn">OFF</button>
            <button id="attrBtn">?</button>
          </div>
          <span id="info">
            ğŸ‘‰Khi báº¡n báº­t cháº¿ Ä‘á»™ AUTO, há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng Ä‘iá»u khiá»ƒn cÃ¡c thiáº¿t bá»‹ cho phÃ¹ há»£p vá»›i 
            mÃ´i trÆ°á»ng, Ä‘áº£m báº£o cÃ¢y trá»“ng Ä‘Æ°á»£c chÄƒm sÃ³c Ä‘Ãºng cÃ¡ch ngay cáº£ khi báº¡n váº¯ng máº·t.
        </div>

      </div>
    </div>
  </div>

 <!-- -----------------TAB 3: Trang nuÃ´i trá»“ng cÃ¢y giá»‘ng ------------------------------------------------------->

<!-- CÃ¢y giá»‘ng chÃ­nh -->
  <div id="nursery" class="tab-content">
    <div class="card">
      <h2>CÃ¡c loáº¡i cÃ¢y giá»‘ng:</h2>
      <!-- áº¢nh chÃ­nh sáº½ Ä‘Æ°á»£c Ä‘á»•i sau khi chá»n -->
      <div class="plant-detail">
        <img id="mainImage" src="img/tree.png" alt="CÃ¢y giá»‘ng" onclick="openPopup()" style="cursor: pointer;" />
        <div class="plant-info">
          <h2 id="plant-name">TÃªn cÃ¢y</h2>
          <p><strong>Thá»i gian thu hoáº¡ch:</strong> <span id="harvest-time">- -</span></p>
          <p id="plant-description">MÃ´ táº£ cÃ¢y giá»‘ng</p>
          <div id="plant-conditions"></div>
        </div>
      </div>
      <p style="margin-top:10px">ğŸ“¸ HÃ¬nh áº£nh cáº­p nháº­t lÃºc <span id="timestamp">--:-- --/--/----</span></p>

      <!-- Popup chá»n cÃ¢y -->
      <div id="plantPopup" class="pop">
        <div class="pop-content">
          <span class="close" onclick="closePopup()">&times;</span>
          <div class="plant-options">
            <div class="plant-item" onclick="selectPlantByName('CÃ¢y cáº£i thÃ¬a')">
              <img src="img/thia.png" alt="CÃ¢y cáº£i thÃ¬a">
              <p>CÃ¢y cáº£i thÃ¬a</p>
            </div>
            <div class="plant-item" onclick="selectPlantByName('CÃ¢y xÃ  lÃ¡ch')">
              <img src="img/xalach.png" alt="CÃ¢y xÃ  lÃ¡ch">
              <p>CÃ¢y xÃ  lÃ¡ch</p>
            </div>
            <div class="plant-item" onclick="selectPlantByName('Cáº£i báº¹ xanh')">
              <img src="img/bexanh.png" alt="Cáº£i báº¹ xanh">
              <p>Cáº£i báº¹ xanh</p>
            </div>
            <div class="plant-item" onclick="selectPlantByName('CÃ¢y cáº£i ngá»t')">
              <img src="img/ngot.png" alt="CÃ¢y cáº£i ngá»t">
              <p>CÃ¢y cáº£i ngá»t</p>
            </div>
          </div>
        </div>
      </div>

      <div id="plant-detail" style="display: none;" class="plant-detail">
        <img id="plant-detail-image" src="" alt="áº¢nh cÃ¢y giá»‘ng">
        <div class="plant-info">
          <h2 id="plant-name">TÃªn cÃ¢y</h2>
          <p><strong>Thá»i gian thu hoáº¡ch:</strong> <span id="harvest-time">--</span></p>
          <p id="plant-description">MÃ´ táº£ cÃ¢y giá»‘ng</p>
        </div>
      </div>

      <!-- Form nháº­p ngÃ y gieo trá»“ng vÃ  ngÃ y thu hoáº¡ch -->
      <h3>Chá»n ngÃ y gieo trá»“ng vÃ  ngÃ y thu hoáº¡ch</h3>
      <form id="plant-form">
        <label for="planting-date">NgÃ y gieo trá»“ng:</label>
        <input type="date" id="planting-date" required><br><br>
        <label for="harvest-date">NgÃ y thu hoáº¡ch:</label>
        <input type="date" id="harvest-date" required><br><br>
        <button type="submit">LÆ°u thÃ´ng tin</button>
      </form>

      <!-- Cáº£nh bÃ¡o ngÃ y thu hoáº¡ch -->
      <div id="harvest-alert" style="display:none; color: yellow; font-size:24px; font-weight: bold; text-align:center; background-color: rgba(255, 0, 0, 0.7); padding: 10px; margin-top: 20px;">
        <p>âš ï¸ Cáº£nh bÃ¡o âš ï¸: NgÃ y thu hoáº¡ch Ä‘Ã£ Ä‘áº¿n gáº§n!</p>
      </div>
    </div>
  </div>

  <script>
    function openPopup() {
      document.getElementById("plantPopup").style.display = "block";
    }

    function closePopup() {
      document.getElementById("plantPopup").style.display = "none";
    }

    const plantData = {
      "CÃ¢y cáº£i thÃ¬a": {
        image: "img/thia.png",
        time: "28 - 35 ngÃ y",
        description: "Cáº£i thÃ¬a lÃ  loáº¡i rau giÃ u dinh dÆ°á»¡ng, giÃ u vitamin A, C, K vÃ  cháº¥t xÆ¡, tá»‘t cho miá»…n dá»‹ch vÃ  tiÃªu hÃ³a...",
        conditions: `
          <ul>
            <li><strong>Nhiá»‡t Ä‘á»™ lÃ½ tÆ°á»Ÿng:</strong> 18Â°C â€“ 24Â°C (Chá»‹u Ä‘Æ°á»£c 13Â°C Ä‘áº¿n 28Â°C; nhiá»‡t Ä‘á»™ cao dá»… gÃ¢y hiá»‡n tÆ°á»£ng ra hoa sá»›m)</li>
            <li><strong>Äá»™ áº©m Ä‘áº¥t:</strong> 60% â€“ 75% </li>
            <li><strong>Äá»™ áº©m khÃ´ng khÃ­:</strong> 50% â€“ 70%</li>
            <li><strong>Chiáº¿u sÃ¡ng:</strong> 6 â€“ 8 giá»/ngÃ y (Ã¡nh sÃ¡ng tÃ¡n xáº¡ hoáº·c náº¯ng nháº¹)</li>
          </ul>
        `
      },

      "CÃ¢y xÃ  lÃ¡ch": {
        image: "img/xalach.png",
        time: "35 - 40 ngÃ y",
        description: "XÃ  lÃ¡ch lÃ  loáº¡i rau Äƒn sá»‘ng phá»• biáº¿n, giÃºp giáº£m viÃªm nhiá»…m, ngá»«a bá»‡nh mÃ£n tÃ­nh, báº£o vá»‡ máº¯t, Ä‘áº·c biá»‡t lÃ  vÃµng máº¡c,...",
        conditions: `
          <ul>
            <li><strong>Nhiá»‡t Ä‘á»™ lÃ½ tÆ°á»Ÿng:</strong> 18Â°C â€“ 24Â°C (Chá»‹u Ä‘Æ°á»£c 13Â°C Ä‘áº¿n 28Â°C)</li>
            <li><strong>Äá»™ áº©m Ä‘áº¥t:</strong> 65% â€“ 75%</li>
            <li><strong>Äá»™ áº©m khÃ´ng khÃ­:</strong> 50% â€“ 70%</li>
            <li><strong>Chiáº¿u sÃ¡ng:</strong> 4 â€“ 6 giá»/ngÃ y (Æ¯a náº¯ng nháº¹)</li>
          </ul>
        `
      },

      "Cáº£i báº¹ xanh": {
      image: "img/bexanh.png",
      time: "30 - 45 ngÃ y",
      description: "Cáº£i báº¹ xanh giÃºp thanh nhiá»‡t, mÃ¡t gan, giáº£m nÃ³ng trong cÆ¡ thá»ƒ, tá»‘t cho há»‡ tiÃªu hÃ³a, giÃ u vitamin...",
      conditions: `
        <ul>
          <li><strong>Nhiá»‡t Ä‘á»™ lÃ½ tÆ°á»Ÿng:</strong> 22Â°C â€“ 28Â°C (cháº¥p nháº­n 20Â°C â€“ 32Â°C)</li>
          <li><strong>Äá»™ áº©m Ä‘áº¥t:</strong> 65% â€“ 80%</li>
          <li><strong>Äá»™ áº©m khÃ´ng khÃ­:</strong> 70% â€“ 85%</li>
          <li><strong>Chiáº¿u sÃ¡ng:</strong> 4 â€“ 6 giá»/ngÃ y (Ã¡nh sÃ¡ng tÃ¡n xáº¡ hoáº·c náº¯ng nháº¹)</li>
        </ul>
      `
      },

      "CÃ¢y cáº£i ngá»t": {
        image: "img/ngot.png",
        time: "25 â€“ 40 ngÃ y",
        description: "Cáº£i ngá»t lÃ  loáº¡i rau tá»‘t cho ngÆ°á»i bá»‹ gout, báº£o vá»‡ gan, giÃ u canxi, ngÄƒn ngá»«a loÃ£ng xÆ°Æ¡ng, phÃ²ng ngá»«a ung thÆ°...",
        conditions: `
          <ul>
            <li><strong>Nhiá»‡t Ä‘á»™ lÃ½ tÆ°á»Ÿng:</strong> 20Â°C â€“ 28Â°C (chá»‹u Ä‘Æ°á»£c 18Â°C â€“ 32Â°C)</li>
            <li><strong>Äá»™ áº©m Ä‘áº¥t:</strong> 60% â€“ 75%</li>
            <li><strong>Äá»™ áº©m khÃ´ng khÃ­:</strong> 70% â€“ 80%</li>
            <li><strong>Chiáº¿u sÃ¡ng:</strong> 4 â€“ 6 giá»/ngÃ y (Ã¡nh sÃ¡ng tÃ¡n xáº¡ hoáº·c náº¯ng nháº¹)</li>
          </ul>
        `
      }
    };

    function selectPlantByName(name) {
      const plant = plantData[name];
      if (!plant) return;

      // Äá»•i áº£nh chÃ­nh
      document.getElementById("mainImage").src = plant.image;

      // Cáº­p nháº­t thÃ´ng tin
      document.getElementById("plant-name").innerText = name;
      document.getElementById("harvest-time").innerText = plant.time;
      document.getElementById("plant-description").innerText = plant.description;

      // Cáº­p nháº­t Ä‘iá»u kiá»‡n sinh trÆ°á»Ÿng náº¿u cÃ³
      document.getElementById("plant-conditions").innerHTML = plant.conditions || "";

      // LÆ°u vÃ o localStorage
      localStorage.setItem("selected-plant-name", name);
      localStorage.setItem("selected-plant-image", plant.image);
      localStorage.setItem("selected-plant-time", plant.time);
      localStorage.setItem("selected-plant-description", plant.description);
      localStorage.setItem("selected-plant-conditions", plant.conditions || "");


      // ÄÃ³ng popup
      closePopup();
    }
  </script>

  <script>
    window.onload = function() {
      
      // Xá»­ lÃ½ ngÃ y gieo trá»“ng vÃ  ngÃ y thu hoáº¡ch
      const plantForm = document.getElementById('plant-form');
      const harvestAlert = document.getElementById('harvest-alert');
      
      // Cáº­p nháº­t timestamp
      const timestamp = document.getElementById('timestamp');
      const now = new Date();
      const formattedTime = now.toLocaleString('vi-VN', { hour: '2-digit', minute: '2-digit' }) + " " + now.toLocaleDateString('vi-VN');
      timestamp.innerText = formattedTime;

      // Láº¥y láº¡i thÃ´ng tin cÃ¢y Ä‘Ã£ chá»n tá»« localStorage náº¿u cÃ³
      const savedPlantName = localStorage.getItem("selected-plant-name");
      const savedPlantImage = localStorage.getItem("selected-plant-image");
      const savedPlantTime = localStorage.getItem("selected-plant-time");
      const savedPlantDescription = localStorage.getItem("selected-plant-description");

      if (savedPlantName && savedPlantImage && savedPlantTime && savedPlantDescription) {
        document.getElementById("mainImage").src = savedPlantImage;
        document.getElementById("plant-name").innerText = savedPlantName;
        document.getElementById("harvest-time").innerText = savedPlantTime;
        document.getElementById("plant-description").innerText = savedPlantDescription;
      }

      const savedPlantConditions = localStorage.getItem("selected-plant-conditions");
      if (savedPlantConditions) {
        document.getElementById("plant-conditions").innerHTML = savedPlantConditions;
      } else {
        document.getElementById("plant-conditions").innerHTML = "";
      }

      // Kiá»ƒm tra náº¿u Ä‘Ã£ cÃ³ ngÃ y gieo trá»“ng vÃ  thu hoáº¡ch Ä‘Æ°á»£c lÆ°u trá»¯ trong localStorage
      const savedPlantingDate = localStorage.getItem('planting-date');
      const savedHarvestDate = localStorage.getItem('harvest-date');
      if (savedPlantingDate && savedHarvestDate) {
        document.getElementById('planting-date').value = savedPlantingDate;
        document.getElementById('harvest-date').value = savedHarvestDate;
        checkHarvestDate(new Date(savedHarvestDate));
      }

      // Xá»­ lÃ½ khi ngÆ°á»i dÃ¹ng gá»­i form
      plantForm.addEventListener('submit', function(event) {
        event.preventDefault();
        const plantingDate = document.getElementById('planting-date').value;
        const harvestDate = document.getElementById('harvest-date').value;
        if (plantingDate && harvestDate) {
          // LÆ°u ngÃ y gieo trá»“ng vÃ  ngÃ y thu hoáº¡ch
          localStorage.setItem('planting-date', plantingDate);
          localStorage.setItem('harvest-date', harvestDate);
          // Kiá»ƒm tra xem ngÃ y thu hoáº¡ch Ä‘Ã£ Ä‘áº¿n chÆ°a
          checkHarvestDate(new Date(harvestDate));
        }
      });

      // HÃ m kiá»ƒm tra ngÃ y thu hoáº¡ch
      function checkHarvestDate(harvestDate) {
        const currentDate = new Date();
        const timeDifference = harvestDate - currentDate;
        if (timeDifference <= 0) {
          // Náº¿u ngÃ y thu hoáº¡ch Ä‘Ã£ Ä‘áº¿n
          harvestAlert.innerHTML = "<p>Cáº£nh bÃ¡o: NgÃ y thu hoáº¡ch Ä‘Ã£ Ä‘áº¿n!</p>";
          harvestAlert.style.display = "block";
        } else {
          // Náº¿u ngÃ y thu hoáº¡ch chÆ°a Ä‘áº¿n
          harvestAlert.style.display = "none";
        }
      }
    }
  </script>

  <!-- TAB 4: Chá»©c nÄƒng khÃ¡c ----------------------------------->
  <div id="other" class="tab-content">
    <div class="card">
      <h2>Chá»©c nÄƒng bá»• sung (Ä‘ang phÃ¡t triá»ƒn)</h2>
      <p>Hiá»‡n há»‡ thá»‘ng Ä‘ang phÃ¡t triá»ƒn thÃªm...</p>
    </div>
  </div>

  <script>
    const tabs = document.querySelectorAll('.tab-btn');
    const contents = document.querySelectorAll('.tab-content');

    tabs.forEach(btn => {
      btn.addEventListener('click', () => {
        tabs.forEach(b => b.classList.remove('active'));
        contents.forEach(c => c.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.dataset.tab).classList.add('active');
      });
    });
  </script>
  <footer>
    <p>Â© 2025 Smart Farm - QUÃCH VÄ‚N Ká»² 23661032 / LÃŠ VÄ‚N NGUá»’N 23661034</p>
  </footer>
  
  <!-- Káº¿t ná»‘i Firebase -->
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.2.10/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.10/firebase-database.js"></script>
  <!-- TODO: Add SDKs for Firebase products that you want to use
       https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/8.2.10/firebase-analytics.js"></script>
  
  <script>
    // Firebase cáº¥u hÃ¬nh
    var firebaseConfig = {
      apiKey: "AIzaSyBaZgHe9UKU5Qe6FBgsW0VPmNHX028jzmU",
      authDomain: "smartfam-9256d.firebaseapp.com",
      databaseURL: "https://smartfam-9256d-default-rtdb.firebaseio.com",
      projectId: "smartfam-9256d",
      storageBucket: "smartfam-9256d.firebasestorage.app",
      messagingSenderId: "1020077202687",
      appId: "1:1020077202687:web:d27398e5fa0f1f609b00ca",
      measurementId: "G-1LXSHL9HDZ"
    };
    // Khá»Ÿi táº¡o Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
    // Láº¥y pháº§n tá»­ DOM
    var nhietdo = document.getElementById('nhietdo-value');
    var doam = document.getElementById('doam-value');
    var anhsang = document.getElementById('anhsang-value');
    var doamdat = document.getElementById('doamdat-value');
    // Äá»c dá»¯ liá»‡u tá»« Firebase
    var dbRef = firebase.database().ref().child('cam_bien/nhietdo');  
    var dbRef2 = firebase.database().ref('cam_bien/doamkk');
    var dbRef3 = firebase.database().ref('cam_bien/anhsang');
    var dbRef4 = firebase.database().ref('cam_bien/doamdat');
    dbRef.on('value', snap => nhietdo.innerText = snap.val() + " Â°C");
    dbRef2.on('value', snap => doam.innerText = snap.val() + " %");
    dbRef3.on('value', snap => anhsang.innerText = snap.val()+ " %");
    dbRef4.on('value', snap => doamdat.innerText = snap.val() + " %"); 

    //----- Cáº¬P NHáº¬T TRáº NG THÃI THIáº¾T Bá»Š Tá»ª FIREBASE ------------------------------------
    function updateUIFromFirebase(img, btnOn, btnOff, imgOnSrc, imgOffSrc, value) {
    if (value === 1) {
      img.src = imgOnSrc;
      btnOn.classList.add('active-on');
      btnOff.classList.remove('active-on', 'active-off');
    } else {
      img.src = imgOffSrc;
      btnOff.classList.add('active-off');
      btnOn.classList.remove('active-on', 'active-off');
    }}

    // ======== BÆ M ========================
    firebase.database().ref("thietbi1/bom").on('value', snapshot => {
      const value = snapshot.val();
      updateUIFromFirebase(imgpum, btn1, btn2, 'img/pumpon1.png', 'img/pump.png', value);
    });

    // ======== PHUN SÆ¯Æ NG ==================
    firebase.database().ref("thietbi2/phun_suong").on('value', snapshot => {
      const value = snapshot.val();
      updateUIFromFirebase(imgmist, btn3, btn4, 'img/miston.png', 'img/mist.png', value);
    });

    // ======== VAN Xáº¢ ======================
    firebase.database().ref("thietbi3/van_xa").on('value', snapshot => {
      const value = snapshot.val();
      updateUIFromFirebase(imgvalve, btn5, btn6, 'img/valveon.png', 'img/valve.png', value);
    });

    // ======== ÄÃˆN =========================
    firebase.database().ref("thietbi4/den").on('value', snapshot => {
      const value = snapshot.val();
      updateUIFromFirebase(imglight, btn7, btn8, 'img/denon.png', 'img/den.png', value);
    });

    // ======== QUáº T ========================
    firebase.database().ref("thietbi5/quat").on('value', snapshot => {
      const value = snapshot.val();
      updateUIFromFirebase(imgfan, btn9, btn10, 'img/fanon.png', 'img/fan.png', value);
    });

     // ======== valve2 ========================
     firebase.database().ref("thietbi6/valve_watering").on('value', snapshot => {
      const value = snapshot.val();
      updateUIFromFirebase(imgvalve2, btn11, btn12, 'img/valve2on.png', 'img/valve2.png', value);
    });

    // ===============Äá»ŒC TRáº NG THÃI Báº¬T/ Táº®T CÃC THIáº¾T Bá»Š===========================
    
    // DOM pháº§n tá»­ hiá»ƒn thá»‹ tráº¡ng thÃ¡i thiáº¿t bá»‹
    const statusPump = document.getElementById('status-pump');
    const statusMist = document.getElementById('status-mist');
    const statusValve = document.getElementById('status-valve');
    const statusLight = document.getElementById('status-light');
    const statusFan = document.getElementById('status-fan');
    const statusvalve2 = document.getElementById('status-valve2');


    // Ghi nháº­n tráº¡ng thÃ¡i cÃ¡c thiáº¿t bá»‹ tá»« Firebase vÃ  cáº­p nháº­t giao diá»‡n
    firebase.database().ref("thietbi1/bom").on('value', snapshot => {
      const value = snapshot.val();
      statusPump.innerText = value === 1 ? "Báº¬T" : "Táº®T";
    });

    firebase.database().ref("thietbi2/phun_suong").on('value', snapshot => {
      const value = snapshot.val();
      statusMist.innerText = value === 1 ? "Báº¬T" : "Táº®T";
    });

    firebase.database().ref("thietbi3/van_xa").on('value', snapshot => {
      const value = snapshot.val();
      statusValve.innerText = value === 1 ? "Báº¬T" : "Táº®T";
    });

    firebase.database().ref("thietbi4/den").on('value', snapshot => {
      const value = snapshot.val();
      statusLight.innerText = value === 1 ? "Báº¬T" : "Táº®T";
    });

    firebase.database().ref("thietbi5/quat").on('value', snapshot => {
      const value = snapshot.val();
      statusFan.innerText = value === 1 ? "Báº¬T" : "Táº®T";
    }); 


    firebase.database().ref("thietbi6/valve_watering").on('value', snapshot => {
      const value = snapshot.val();
      statusvalve2.innerText = value === 1 ? "Báº¬T" : "Táº®T";
    });

    // ============ AUTO BUTTON ==============================
    firebase.database().ref("autoBtn").on("value", (snapshot) => {
      const value = snapshot.val();
      if (value === 1) {
        btn.classList.add("on");
        btn.classList.remove("off");
        btn.textContent = "ON";
      } else {
        btn.classList.remove("on");
        btn.classList.add("off");
        btn.textContent = "OFF";
      }
    });
  </script>

  <script src="function.js"></script>

</body>
</html>
